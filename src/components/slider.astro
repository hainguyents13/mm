---
import { Icon } from 'astro-icon/components';
---

<div class='slider'>
  <img
    class='active'
    src='https://images.pexels.com/photos/30811019/pexels-photo-30811019/free-photo-of-charming-parisian-street-cafe-with-cozy-outdoor-seating.jpeg?auto=compress&cs=tinysrgb&w=600'
  />
  <img src='https://images.pexels.com/photos/31190087/pexels-photo-31190087/free-photo-of-majestic-northern-harrier-in-flight-over-quincy.jpeg?auto=compress&cs=tinysrgb&w=600' />
  <img src='https://images.pexels.com/photos/30645780/pexels-photo-30645780/free-photo-of-tranquil-coastal-scene-with-sailboat-in-france.jpeg?auto=compress&cs=tinysrgb&w=600' />
  <nav class='slider-nav'>
    <ul>
      <li class='arrow'>
        <button class='previous'>
          <Icon name='bx:left-arrow-alt' />
        </button>
      </li>
      <li class='arrow'>
        <button class='next'>
          <Icon name='bx:right-arrow-alt' />
        </button>
      </li>
    </ul>
  </nav>
</div>

<style>
  button {
    position: relative;
    display: inline-block;
    cursor: pointer;
    outline: none;
    border: 0;
    vertical-align: middle;
    text-decoration: none;
    background: transparent;
    padding: 20px 5px;
    color: $arrow;
    font-size: 2rem;
  }

  button span {
    position: relative;
    display: inline-block;
    transform: translateX(0);
    transition: transform 0.3s ease;
  }

  .previous:hover span {
    transform: translateX(-10px) scale(1.2);
  }

  .next:hover span {
    transform: translateX(10px) scale(1.2);
  }

  .slider-nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
  }

  .slider-nav li {
    display: flex;
    flex: 2;
    text-align: center;
  }

  .slider img {
    border-radius: 5px;
    height: 500px;
    object-fit: cover;
    aspect-ratio: 16 / 9;
    max-width: 100%;
    display: none;
    box-shadow: 10px 10px 0 #0000000d;
  }

  .slider img.active {
    display: block;
    animation: fadeImg 0.8s;
  }

  .slider-nav .arrow {
    flex: 0 0 15%;
  }

  .slider-nav a {
    flex-basis: 100%;
    display: flex;
    align-items: center;
  }

  .slider-nav span {
    display: block;
    width: 100%;
  }

  @keyframes fadeImg {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }
</style>

<script is:inline>
  function initSlider() {
    const items = document.querySelectorAll('.slider img');
    const itemCount = items.length;
    const nextItem = document.querySelector('.next');
    const previousItem = document.querySelector('.previous');
    let count = 0;

    function showNextItem() {
      items[count].classList.remove('active');

      count = count < itemCount - 1 ? count + 1 : 0;
      items[count].classList.add('active');
    }

    function showPreviousItem() {
      items[count].classList.remove('active');

      count = count > 0 ? count - 1 : itemCount - 1;
      items[count].classList.add('active');
    }

    function keyPress(e) {
      if (e.key === 'ArrowLeft') {
        showPreviousItem();
      } else if (e.key === 'ArrowRight') {
        showNextItem();
      }
    }

    nextItem?.addEventListener('click', showNextItem);
    previousItem?.addEventListener('click', showPreviousItem);
    document.addEventListener('keydown', keyPress);
  }
  initSlider();
</script>
